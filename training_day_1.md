OroCommerce Training – Day 1 (таймкоды и структура)

**Введение и обзор дня**

00:00 – 02:30
*   Представление спикера (Александр Джули, Алекс) и его роли в Oro (старший инженер, руководитель проектов, тренер).
*   Обзор целей курса OroCommerce Technical Training: понимание функций приложения, технических особенностей, лучших практик, точек расширяемости и кастомизации.
*   Формат курса: 4 дня, до 6 часов в день, функциональные и технические темы, сессии вопросов и ответов после каждой темы.
*   Обмен слайдами после каждого дня по электронной почте.
*   Использование Slack для вопросов, не связанных напрямую с темой.

**План курса (обзор дней)**

03:02 – 05:12
*   **День 1 (Сегодня):** Storefront, Websites, Themes, Layouts, Customer Entities, Products, Master Catalog.
*   **День 2:** Web Catalog, Pricing, Promotions, Discounts.
*   **День 3:** Inventory, Taxes, Shopping Lists, Request for Quotes, Checkout Process, Orders.
*   **День 4:** Shipping and Payment Methods, CRM Features (Accounts, Contacts, Leads, Opportunities, Activities).

**Storefront и Websites**

05:12 – 18:47
*   Приложение OroCommerce состоит из двух частей: Back Office (для мерчантов, администраторов, менеджеров по продажам; функциональность важнее производительности) и Storefront (для покупателей, пользователей; производительность важнее функциональности).
*   Back Office также называют Management Console или Backend.
*   Storefront доступен как для зарегистрированных (покупателей), так и для гостевых/анонимных пользователей. Возможность настройки доступа.
*   Storefront частично защищен: можно настроить различные права для разных типов пользователей.
*   Storefront также называют Frontend.
*   Демонстрация различий между Storefront и Back Office в интерфейсе (темы, цвета, разделы).
*   Структура Storefront: Customer Portal, Commerce, Commerce CRM (пакеты, построенные друг на друге).
*   Customer Portal: функциональность для входа зарегистрированных пользователей, навигация по аккаунту, фронтенд-функции.
*   Commerce: функциональность, связанная с процессом продаж (продукты, атрибуты, списки покупок, оформление заказа, размещение заказов).
*   Commerce CRM: мост между Commerce и Back Office, агрегирует данные.
*   Настройка префикса для Back Office (по умолчанию `/admin`, рекомендуется изменить для безопасности).
*   Настройка маршрутов для Storefront: маршруты должны быть помечены `frontend: true` для доступности во фронтенде.
*   Маршруты, доступные из JavaScript, должны быть помечены `expose: true`.
*   Несколько веб-сайтов на одном экземпляре приложения (только Enterprise Edition).
*   Назначение веб-сайтов: разный контент, продукты, B2B/B2C, локализация, меню.
*   Конфигурация веб-сайтов в Back Office: System -> Websites.
*   Каждый веб-сайт может иметь свою конфигурацию, переопределяющую глобальную.
*   Демонстрация изменения темы и валют для конкретного веб-сайта.
*   Механизмы сопоставления веб-сайтов: по URL, по Cookie, по переменной окружения (с возможностью настройки приоритета).

**Themes и Layouts**

18:47 – 33:20
*   Темы (Themes): пользовательский интерфейс, внешний вид веб-сайта. Включают изменения макета, стили, JavaScript-компоненты.
*   Рекомендуется использовать родительскую тему и переопределять только необходимые части.
*   Темы могут быть настроены глобально или для конкретного веб-сайта.
*   Back Office имеет свою тему (Oro Admin Theme), которая обычно не кастомизируется.
*   Определение тем: `theme.yml` файл (label, description, groups, icon, logo, RTL support).
*   Структура файлов темы: `resources/views/layouts/<theme_name>/`.
*   `config/assets.yml`: определяет стили, используемые темой.
*   `config/jsmodules.yml`: определяет JavaScript-компоненты.
*   `config/screens.yml`: определяет дополнительные классы для разных экранов (для адаптивности).
*   Ответ на вопрос: темы по умолчанию адаптивны.
*   Layouts: структура блоков на странице. Определяются в YAML-файлах.
*   Действия с блоками: добавление, удаление, перемещение, изменение опций.
*   Типы блоков: контейнеры, кнопки, ссылки и т.д.
*   `page` папка: изменения применяются ко всем страницам.
*   Папки с именем маршрута: изменения применяются к конкретному маршруту.
*   Использование Symfony Toolbar для отладки структуры макета.
*   Кэширование макетов: по умолчанию не кэшируются. Можно включить для отдельных блоков для повышения производительности.
*   Рекомендации: хранить связанные с темой изменения в отдельном бандле.

**Customer Entities**

33:20 – 55:16
*   **Customer:** представляет компанию, с которой ведется бизнес. Может иметь иерархию (родитель-потомок).
*   **Customer Group:** объединяет компании со схожим поведением или настройками (например, ценами, методами доставки). Одна компания может принадлежать только к одной группе.
*   **Customer User:** реальные люди, сотрудники компании, которые взаимодействуют с веб-сайтом. Принадлежат к компании.
*   **Customer User Roles:** определяют разрешения для Customer Users (что разрешено просматривать, создавать, редактировать).
*   **Customer Visitor:** представляет гостевого пользователя до регистрации. Записывает действия в сессии.
*   Уровни конфигурации: Customer -> Customer Group -> Website -> Global (с переопределением).
*   Настройка регистрации пользователей: возможность отключить самостоятельную регистрацию, требовать подтверждение по email, скрывать поле "Company Name".
*   Демонстрация создания Customer, Customer Group, Customer User в Back Office.
*   Демонстрация управления адресами (billing/shipping) для Customer и Customer User.
*   Демонстрация различий в разрешениях между ролями "Administrator" и "Buyer" во фронтенде.
*   Импорт/экспорт данных клиентов: через API или через функциональность импорта/экспорта в Back Office (с использованием шаблонов).
*   Ответ на вопрос: массовая рассылка email (например, для сброса пароля) имеет ограничения по количеству, может быть настроена.
*   Ответ на вопрос: изменение группы клиента по правилам (например, по объему покупок) требует кастомизации (запланированные задачи).
*   Ответ на вопрос: пароли хранятся в хешированном виде, нельзя установить тот же пароль при миграции. Можно отправить ссылку для сброса пароля.

**Products и Master Catalog**

55:16 – 05:19:03
*   **Типы продуктов:**
    *   **Simple Product:** физический товар с одной вариацией.
    *   **Configurable Product:** агрегирует несколько вариантов одного продукта (например, футболка разных цветов).
    *   **Product Kit (Bundled Product):** агрегирует несколько продуктов, которые обычно покупаются вместе (например, комплект офисной мебели).
*   **Product Family:** группирует продукты с общими атрибутами (название, SKU, описание, бренд, единицы измерения, цвет, размер). Могут быть локализуемыми.
*   **Product Attributes:** свойства продукта.
*   **Unit of Quantity:** единицы измерения, в которых продается продукт (штуки, килограммы, наборы). Можно настроить коэффициенты конверсии и видимость во фронтенде.
*   **Product Images:** три типа изображений: Main (для PDP), Listing (для страниц листинга), Additional (для галереи).
*   Настройка изображений: водяные знаки, размеры изображений для разных типов.
*   **Product Templates:** шаблоны для отображения страниц продукта (например, двухколоночный макет, список).
*   Демонстрация создания Simple Product, Configurable Product (с использованием атрибута "цвет") в Back Office и их отображения во фронтенде.
*   Демонстрация Product Kit во фронтенде: отображается как набор, нельзя изменить количество отдельных элементов.
*   Включение Product Kit: через конфигурацию приложения (по умолчанию отключен).
*   Импорт данных продуктов: через функциональность импорта в Back Office (продукты, изображения, связанные продукты, атрибуты).
*   Ответ на вопрос: можно создавать кастомные флаги/поля для продуктов через миграции схемы или через Entity Management.
*   Ответ на вопрос: нельзя добавить видео в галерею "из коробки", но есть расширения.
*   Ответ на вопрос: можно прикреплять файлы к продуктам (например, сертификаты) через добавление поля типа "файл".
*   Ответ на вопрос: Product Attribute используется для свойств, которые должны быть видны во фронтенде (фильтрация, поиск), Product Field - для внутренних свойств Back Office.
*   Ответ на вопрос: нет стандартного типа продукта для "сгруппированных продуктов" как в Magento, но планируется в будущем.

**Q&A и Завершение**

05:19:03 – 05:21:26
*   Обсуждение вопросов по темам дня.
*   Краткое подведение итогов дня 1.
*   План на день 2: Master Catalog, Web Catalog, Pricing, Promotions, Discounts.
*   Будут предоставлены слайды и упражнения.
